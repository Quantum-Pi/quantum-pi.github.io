import{t as k,b as x,c as V}from"../chunks/CHCsuxMM.js";import{A as ot,ap as nt,aq as st,Y as at,ar as W,ac as it,ao as A,Z as ct,am as S,j as u,ad as K,an as w,al as Y,ak as $}from"../chunks/BzRjigEQ.js";import{d as ft}from"../chunks/cI0MdzPW.js";import{i as H}from"../chunks/DnNOO8HG.js";import{e as J,i as N}from"../chunks/CfoSl7lC.js";import{r as lt,s as pt,a as dt,b as mt}from"../chunks/DdVwH2s_.js";const ut=[];function E(t,p=!1){return B(t,new Map,"",ut)}function B(t,p,d,_,y=null){if(typeof t=="object"&&t!==null){var C=p.get(t);if(C!==void 0)return C;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(ot(t)){var g=Array(t.length);p.set(t,g),y!==null&&p.set(y,g);for(var b=0;b<t.length;b+=1){var L=t[b];b in t&&(g[b]=B(L,p,d,_))}return g}if(nt(t)===st){g={},p.set(t,g),y!==null&&p.set(y,g);for(var T in t)g[T]=B(t[T],p,d,_);return g}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return B(t.toJSON(),p,d,_,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}const vt=(t,p,d,_,y)=>{const C=E(u(p)).map(g=>[...g]);K(d,_(C,y),!0),console.log("Unique Solutions:",E(u(d)))};var ht=(t,p,d,_)=>p(d,_),gt=k('<label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"></label>'),_t=k('<div class="flex items-center space-x-2"></div>'),bt=k('<div class="w-8 h-8 border border-gray-300"></div>'),Ft=k('<div class="mb-8"><h3 class="text-xl font-semibold mb-4"></h3> <div class="grid grid-cols-4 gap-1 svelte-1k48ly"></div></div>'),xt=k('<div class="p-8 flex flex-col justify-center w-min"><h2 class="text-2xl font-bold mb-4">Solutions</h2> <!></div>'),wt=k("<p>No solutions found.</p>"),yt=k('<div class="p-8"><div>WIP, may be jank</div> <div class="mt-8 flex flex-col justify-center w-min"><div class="space-y-2 mb-4"></div> <button type="button" class="btn preset-filled-primary-500">Start</button></div> <div><!></div></div>');function At(t,p){at(p,!0);let d=W(it([[!1,!0,!0,!0],[!1,!0,!0,!0],[!1,!0,!1,!0],[!0,!0,!0,!0]])),_=W(null);const y=(o,n)=>{u(d)[o][n]=!u(d)[o][n],K(d,[...u(d)],!0)},C=o=>{const n=Array.from({length:4},()=>Array(4).fill(null));for(const{piece:f,rotation:c,position:s}of o){const e=b[f][c],[r,a]=s;for(let l=0;l<e.length;l++)for(let i=0;i<e[l].length;i++)e[l][i]===1&&(n[r+l][a+i]=f)}return n},g={I:"#FF0000",O:"#00FF00",T:"#0000FF",L:"#FF00FF",J:"#00FFFF",S:"#FFFF00",Z:"#FFFFFF"},b={I:[[[1,1,1,1]],[[1],[1],[1],[1]]],O:[[[1,1],[1,1]]],T:[[[0,1,0],[1,1,1]],[[1,0],[1,1],[1,0]],[[1,1,1],[0,1,0]],[[0,1],[1,1],[0,1]]],L:[[[1,0],[1,0],[1,1]],[[1,1,1],[1,0,0]],[[1,1],[0,1],[0,1]],[[0,0,1],[1,1,1]]],J:[[[0,1],[0,1],[1,1]],[[1,0,0],[1,1,1]],[[1,1],[1,0],[1,0]],[[1,1,1],[0,0,1]]],S:[[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]]],Z:[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]]},L=(o,n)=>{const f=[];for(let c=0;c<n.length;c++){const s=n[c];for(let e=0;e<=o.length-s.length;e++)for(let r=0;r<=o[0].length-s[0].length;r++)T(o,s,e,r)&&f.push({rotation:c,position:[e,r]})}return f},T=(o,n,f,c)=>{for(let s=0;s<n.length;s++)for(let e=0;e<n[s].length;e++)if(n[s][e]===1){const r=f+s,a=c+e;if(r>=o.length||a>=o[0].length||!o[r][a])return!1}return!0},G=(o,n)=>{const f=o.map(c=>c.map(()=>!1));for(const{rotation:c,position:s,piece:e}of n){const r=b[e][c],[a,l]=s;for(let i=0;i<r.length;i++)for(let v=0;v<r[i].length;v++)if(r[i][v]===1){if(f[a+i][l+v]||!o[a+i][l+v])return!1;f[a+i][l+v]=!0}}return o.every((c,s)=>c.every((e,r)=>!e||f[s][r]))},Q=(o,n)=>{const f=[];for(const[a,l]of Object.entries(n)){const i=L(o,l).map(v=>({piece:a,...v}));f.push(...i)}const c=new Set,s=[],e=(a,l)=>{if(G(o,a)){const i=a.map(({piece:v})=>v).sort().join(",");c.has(i)||(c.add(i),s.push([...a]));return}for(const i of f){const{piece:v,rotation:P,position:q}=i,F=n[v][P],[I,M]=q;let j=!0;for(let m=0;m<F.length;m++){for(let h=0;h<F[m].length;h++)if(F[m][h]===1){const O=I+m,rt=M+h;if(l[O][rt]){j=!1;break}}if(!j)break}if(!j)continue;const Z=l.map(m=>[...m]);for(let m=0;m<F.length;m++)for(let h=0;h<F[m].length;h++)F[m][h]===1&&(Z[I+m][M+h]=!0);a.push(i),e(a,Z),a.pop()}},r=o.map(a=>a.map(()=>!1));return e([],r),s};var R=yt(),z=A(S(R),2),D=S(z);J(D,20,()=>[0,1,2,3],N,(o,n)=>{var f=_t();J(f,20,()=>[0,1,2,3],N,(c,s)=>{var e=gt(),r=S(e);lt(r),r.__change=[ht,y,n,s],w(e),Y(a=>pt(r,a),[()=>E(u(d))[n][s]]),x(c,e)}),w(f),x(o,f)}),w(D);var X=A(D,2);X.__click=[vt,d,_,Q,b],w(z);var U=A(z,2),tt=S(U);{var et=o=>{var n=V(),f=$(n);{var c=e=>{var r=xt(),a=A(S(r),2);J(a,17,()=>u(_),N,(l,i,v)=>{var P=Ft(),q=S(P);q.textContent=`Solution ${v+1}:`;var F=A(q,2);J(F,21,()=>C(u(i)),N,(I,M)=>{var j=V(),Z=$(j);J(Z,17,()=>u(M),N,(m,h)=>{var O=bt();Y(()=>{dt(O,`background-color: ${(u(h)?g[u(h)]:"transparent")??""}`),mt(O,"title",u(h)?`Piece: ${u(h)}`:"")}),x(m,O)}),x(I,j)}),w(F),w(P),x(l,P)}),w(r),x(e,r)},s=e=>{var r=wt();x(e,r)};H(f,e=>{u(_).length>0?e(c):e(s,!1)})}x(o,n)};H(tt,o=>{u(_)&&o(et)})}w(U),w(R),x(t,R),ct()}ft(["change","click"]);export{At as component};
