import{t as j,a as w,c as V}from"../chunks/DyjdbHco.js";import{A as nt,ak as at,al as it,ad as ct,am as W,a5 as ft,aj as C,ag as lt,ah as S,j as d,a6 as Y,ai as F,af as z,ae as Q}from"../chunks/BzEa9_TB.js";import{d as pt,s as dt}from"../chunks/DsGowtdd.js";import{i as X}from"../chunks/B76Wvor3.js";import{e as I,i as M}from"../chunks/MzGdBfJh.js";import{r as mt,s as vt,a as ut,b as ht}from"../chunks/BRaqvQm-.js";const gt=[];function E(t,m=!1){return R(t,new Map,"",gt)}function R(t,m,v,g,y=null){if(typeof t=="object"&&t!==null){var P=m.get(t);if(P!==void 0)return P;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(nt(t)){var h=Array(t.length);m.set(t,h),y!==null&&m.set(y,h);for(var k=0;k<t.length;k+=1){var A=t[k];k in t&&(h[k]=R(A,m,v,g))}return h}if(at(t)===it){h={},m.set(t,h),y!==null&&m.set(y,h);for(var N in t)h[N]=R(t[N],m,v,g);return h}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return R(t.toJSON(),m,v,g,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}const _t=(t,m,v,g,y)=>{const P=E(d(m)).map(h=>[...h]);Y(v,g(P,y),!0),console.log("Unique Solutions:",E(d(v)))};var bt=(t,m,v,g)=>m(v,g),Ft=j('<label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"></label>'),xt=j('<div class="flex items-center space-x-2"></div>'),wt=j('<div class="w-8 h-8 border border-gray-300"></div>'),yt=j('<div class="mb-8 w-screen"><h3 class="text-xl font-semibold mb-4"></h3> <div class="mb-2"><strong>Stats</strong> </div> <div class="grid grid-cols-4 gap-1 w-fit svelte-1k48ly"></div></div>'),kt=j('<div class="p-8 flex flex-col justify-center w-min"><h2 class="text-2xl font-bold mb-4">Solutions</h2> <!></div>'),Ct=j("<p>No solutions found.</p>"),St=j('<div class="p-8"><div>WIP, may be jank</div> <div class="mt-8 flex flex-col justify-center w-min"><div class="space-y-2 mb-4"></div> <button type="button" class="btn preset-filled-primary-500">Start</button></div> <div class="w-screen"><!></div></div>');function It(t,m){ct(m,!0);let v=W(ft([[!1,!0,!0,!0],[!1,!0,!0,!0],[!1,!0,!1,!0],[!0,!0,!0,!0]])),g=W(null);const y=(o,s)=>{d(v)[o][s]=!d(v)[o][s],Y(v,[...d(v)],!0)},P=o=>{const s=Array.from({length:4},()=>Array(4).fill(null));for(const{piece:f,rotation:c,position:n}of o){const e=A[f][c],[r,a]=n;for(let l=0;l<e.length;l++)for(let i=0;i<e[l].length;i++)e[l][i]===1&&(s[r+l][a+i]=f)}return s},h={I:"#FF0000",O:"#00FF00",T:"#0000FF",L:"#FF00FF",J:"#00FFFF",S:"#FFFF00",Z:"#FFFFFF"},k={I:"Gold",O:"Crit DMG",T:"HP Recovery",L:"ATK",J:"HP",S:"Accuracy",Z:"Dodge"},A={I:[[[1,1,1,1]],[[1],[1],[1],[1]]],O:[[[1,1],[1,1]]],T:[[[0,1,0],[1,1,1]],[[1,0],[1,1],[1,0]],[[1,1,1],[0,1,0]],[[0,1],[1,1],[0,1]]],L:[[[1,0],[1,0],[1,1]],[[1,1,1],[1,0,0]],[[1,1],[0,1],[0,1]],[[0,0,1],[1,1,1]]],J:[[[0,1],[0,1],[1,1]],[[1,0,0],[1,1,1]],[[1,1],[1,0],[1,0]],[[1,1,1],[0,0,1]]],S:[[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]]],Z:[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]]},N=(o,s)=>{const f=[];for(let c=0;c<s.length;c++){const n=s[c];for(let e=0;e<=o.length-n.length;e++)for(let r=0;r<=o[0].length-n[0].length;r++)K(o,n,e,r)&&f.push({rotation:c,position:[e,r]})}return f},K=(o,s,f,c)=>{for(let n=0;n<s.length;n++)for(let e=0;e<s[n].length;e++)if(s[n][e]===1){const r=f+n,a=c+e;if(r>=o.length||a>=o[0].length||!o[r][a])return!1}return!0},tt=(o,s)=>{const f=o.map(c=>c.map(()=>!1));for(const{rotation:c,position:n,piece:e}of s){const r=A[e][c],[a,l]=n;for(let i=0;i<r.length;i++)for(let u=0;u<r[i].length;u++)if(r[i][u]===1){if(f[a+i][l+u]||!o[a+i][l+u])return!1;f[a+i][l+u]=!0}}return o.every((c,n)=>c.every((e,r)=>!e||f[n][r]))},et=(o,s)=>{const f=[];for(const[a,l]of Object.entries(s)){const i=N(o,l).map(u=>({piece:a,...u}));f.push(...i)}const c=new Set,n=[],e=(a,l)=>{if(tt(o,a)){const i=a.map(({piece:u})=>u).sort().join(",");c.has(i)||(c.add(i),n.push([...a]));return}for(const i of f){const{piece:u,rotation:O,position:D}=i,b=s[u][O],[G,J]=D;let x=!0;for(let p=0;p<b.length;p++){for(let _=0;_<b[p].length;_++)if(b[p][_]===1){const H=G+p,T=J+_;if(l[H][T]){x=!1;break}}if(!x)break}if(!x)continue;const L=l.map(p=>[...p]);for(let p=0;p<b.length;p++)for(let _=0;_<b[p].length;_++)b[p][_]===1&&(L[G+p][J+_]=!0);a.push(i),e(a,L),a.pop()}},r=o.map(a=>a.map(()=>!1));return e([],r),n};var Z=St(),q=C(S(Z),2),B=S(q);I(B,20,()=>[0,1,2,3],M,(o,s)=>{var f=xt();I(f,20,()=>[0,1,2,3],M,(c,n)=>{var e=Ft(),r=S(e);mt(r),r.__change=[bt,y,s,n],F(e),z(a=>vt(r,a),[()=>E(d(v))[s][n]]),w(c,e)}),F(f),w(o,f)}),F(B);var rt=C(B,2);rt.__click=[_t,v,g,et,A],F(q);var U=C(q,2),ot=S(U);{var st=o=>{var s=V(),f=Q(s);{var c=e=>{var r=kt(),a=C(S(r),2);I(a,17,()=>d(g),M,(l,i,u)=>{var O=yt(),D=S(O);D.textContent=`Solution ${u+1}:`;var b=C(D,2),G=C(S(b));F(b);var J=C(b,2);I(J,21,()=>P(d(i)),M,(x,L)=>{var p=V(),_=Q(p);I(_,17,()=>d(L),M,(H,T)=>{var $=wt();z(()=>{ut($,`background-color: ${(d(T)?h[d(T)]:"transparent")??""}`),ht($,"title",d(T)?`Piece: ${d(T)}`:"")}),w(H,$)}),w(x,p)}),F(J),F(O),z(x=>dt(G,`: ${x??""}`),[()=>d(i).map(({piece:x})=>k[x]).join(", ")]),w(l,O)}),F(r),w(e,r)},n=e=>{var r=Ct();w(e,r)};X(f,e=>{d(g).length>0?e(c):e(n,!1)})}w(o,s)};X(ot,o=>{d(g)&&o(st)})}F(U),F(Z),w(t,Z),lt()}pt(["change","click"]);export{It as component};
