import{f as S,a as x,c as Ce}from"../chunks/DZ8ESMhp.js";import{w as Te,av as Ie,aw as Pe,$ as Ae,ax as Z,al as fe,Y as Oe,e,ah as L,a3 as m,a5 as N,a1 as Le,a2 as h,a4 as v,a6 as Ne,a0 as pe,a7 as $e}from"../chunks/D9HiJBET.js";import{d as je,s as G}from"../chunks/DNUqUNd-.js";import{i as ne}from"../chunks/OkD_xKvP.js";import{e as $,i as j}from"../chunks/CVxcvIhS.js";import{s as Je,r as de,a as ve,b as ue,c as Me}from"../chunks/DEeP6JZJ.js";const Re=[];function U(a,w=!1,C=!1){return X(a,new Map,"",Re,null,C)}function X(a,w,C,J,g=null,b=!1){if(typeof a=="object"&&a!==null){var T=w.get(a);if(T!==void 0)return T;if(a instanceof Map)return new Map(a);if(a instanceof Set)return new Set(a);if(Te(a)){var _=Array(a.length);w.set(a,_),g!==null&&w.set(g,_);for(var P=0;P<a.length;P+=1){var Q=a[P];P in a&&(_[P]=X(Q,w,C,J,null,b))}return _}if(Ie(a)===Pe){_={},w.set(a,_),g!==null&&w.set(g,_);for(var M in a)_[M]=X(a[M],w,C,J,null,b);return _}if(a instanceof Date)return structuredClone(a);if(typeof a.toJSON=="function"&&!b)return X(a.toJSON(),w,C,J,a)}if(a instanceof EventTarget)return a;try{return structuredClone(a)}catch{return a}}var ze=S('<div class="flex items-center space-x-2"><label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"/></label> <div class="w-8 h-8 border border-gray-300"></div> <span> </span></div>'),qe=S('<label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"/></label>'),De=S('<div class="flex items-center space-x-2"></div>'),Ze=S(`<p class="text-red-500">Iteration limit reached. Please try to reduce the number of pieces or the size of the
						board.</p>`),Ge=S('<p class="text-green-500"> </p>'),He=S('<div class="w-8 h-8 border border-gray-300"></div>'),Be=S('<div class="mb-8 w-screen"><h3 class="text-xl font-semibold mb-4"></h3> <div class="mb-2"><strong>Stats</strong> </div> <div class="grid grid-cols-7 gap-1 w-fit svelte-15sb5z1"></div></div>'),Ee=S('<div class="m-8 flex flex-col justify-center w-min"><h2 class="text-2xl font-bold mb-4">Solutions</h2> <!></div>'),Ke=S("<p>No solutions found.</p>"),Ue=S('<div class="mx-8 mt-4"><!></div> <!>',1),Xe=S(`<div class="p-8"><div>Soul weapon engravement optimimzer for <a class="text-blue-500" href="https://www.reddit.com/r/SlayerLegend/">Slayer Legends</a></div> <div class="my-4"><div>If you have any comments/requests you can reach out to me via:</div> <div class="ml-3">Discord: quantumpie</div> <div class="ml-3">Reddit: u/QuantumPie_</div></div> <span class="h4">How to use:</span> <div class="flex flex-col gap-y-2 mb-4"><span class="ml-4">1. Select which pieces you want to be included in the solved pattern (for example, if CRIT &
			ATK are selected, the solutions must include at least one of those pieces)</span> <span class="ml-4">2. Check the boxes to match the pattern for your soul weapon. The current example is for a
			4x4 weapon (note: it doesn't matter where the 4x4 region is centered)</span> <span class="ml-4">3. Click the "Start" button to find all possible solutions with the given constraints</span> <span>Note: There are <span> </span> </span></div> <div></div> <div class="mt-8 flex flex-col justify-center w-min"><div class="space-y-2 mb-4"></div> <button type="button" class="btn preset-filled-primary-500">Start</button></div> <div class="w-screen"><!></div></div>`);function st(a,w){Ae(w,!0);const C=1e7,J=90;let g=Z(0),b=Z(fe([[!1,!0,!0,!0,!1,!1,!1],[!1,!0,!0,!0,!1,!1,!1],[!1,!0,!1,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1]]));Oe(()=>{e(b),e(I),L(_,le(!0).length,!0)});let T=Z(null),_=Z(0);const P=(t,r)=>{e(b)[t][r]=!e(b)[t][r],L(b,[...e(b)],!0)},Q=t=>{const r=Array.from({length:7},()=>Array(7).fill(null));for(const{piece:n,rotation:l,position:i}of t){const s=R[n][l],[c,f]=i;for(let u=0;u<s.length;u++)for(let o=0;o<s[u].length;o++)s[u][o]===1&&(r[c+u][f+o]=n)}return r},M={I:"#FF0000",O:"#00FF00",T:"#0000FF",L:"#FF00FF",J:"#00FFFF",S:"#FFFF00",Z:"#FFFFFF"},V={I:"Gold",O:"Crit DMG",T:"HP Recovery",L:"ATK",J:"HP",S:"Accuracy",Z:"Dodge"},R={I:[[[1,1,1,1]],[[1],[1],[1],[1]]],O:[[[1,1],[1,1]]],T:[[[0,1,0],[1,1,1]],[[1,0],[1,1],[1,0]],[[1,1,1],[0,1,0]],[[0,1],[1,1],[0,1]]],L:[[[1,0],[1,0],[1,1]],[[1,1,1],[1,0,0]],[[1,1],[0,1],[0,1]],[[0,0,1],[1,1,1]]],J:[[[0,1],[0,1],[1,1]],[[1,0,0],[1,1,1]],[[1,1],[1,0],[1,0]],[[1,1,1],[0,0,1]]],S:[[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]]],Z:[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]]};let I=Z(fe({I:!0,O:!0,T:!0,L:!0,J:!0,S:!0,Z:!0}));const me=(t,r)=>{const n=[];for(let l=0;l<r.length;l++){const i=r[l];for(let s=0;s<=t.length-i.length;s++)for(let c=0;c<=t[0].length-i[0].length;c++)he(t,i,s,c)&&n.push({rotation:l,position:[s,c]})}return n},he=(t,r,n,l)=>{for(let i=0;i<r.length;i++)for(let s=0;s<r[i].length;s++)if(r[i][s]===1){const c=n+i,f=l+s;if(c>=t.length||f>=t[0].length||!t[c][f])return!1}return!0},_e=(t,r)=>{const n=t.map(l=>l.map(()=>!1));for(const{rotation:l,position:i,piece:s}of r){const c=R[s][l],[f,u]=i;for(let o=0;o<c.length;o++)for(let p=0;p<c[o].length;p++)if(c[o][p]===1){if(n[f+o][u+p]||!t[f+o][u+p])return!1;n[f+o][u+p]=!0}}return t.every((l,i)=>l.every((s,c)=>!s||n[i][c]))},le=(t=!1)=>{const r=[];for(const[n,l]of Object.entries(R)){const i=me(e(b),l).map(s=>({piece:n,...s}));r.push(...i)}return t?r.filter(({piece:n})=>e(I)[n]):r},ge=(t,r)=>{const n=le(!1);console.log("Number of placements: ",n.length);const l=new Set,i=[],s=(f,u,o=!1)=>{if(_e(t,f)){const y=f.map(({piece:A})=>A).sort().join(",");l.has(y)||(l.add(y),i.push([...f]));return}const p=o?n:n.filter(({piece:y})=>e(I)[y]);for(const y of p){if(e(g)>C){console.log("Iteration limit reached");return}const{piece:A,rotation:B,position:ae}=y,k=r[A][B],[z,O]=ae;let q=!0;for(let d=0;d<k.length;d++){for(let F=0;F<k[d].length;F++){if(k[d][F]===1){const E=z+d,re=O+F;if(u[E][re]){q=!1;break}}L(g,e(g)+1)}if(!q)break}if(!q)continue;const D=u.map(d=>[...d]);for(let d=0;d<k.length;d++)for(let F=0;F<k[d].length;F++)k[d][F]===1&&(D[z+d][O+F]=!0);f.push(y),s(f,D,!0),f.pop()}},c=t.map(f=>f.map(()=>!1));return s([],c),i},be=()=>{L(g,0);const t=U(e(b)).map(r=>[...r]);L(T,ge(t,R),!0),console.log("Unique Solutions:",U(e(T))),console.log("Iterations:",e(g))};var Y=Xe(),W=m(h(Y),6),ie=m(h(W),6),H=m(h(ie)),xe=h(H,!0);v(H);var we=m(H);v(ie),v(W);var ee=m(W,2);$(ee,21,()=>Object.entries(R),j,(t,r)=>{var n=Ne(()=>$e(e(r),2));let l=()=>e(n)[0];var i=ze(),s=h(i),c=h(s);de(c),c.__change=()=>{e(I)[l()]=!e(I)[l()],L(I,{...e(I)},!0)},v(s);var f=m(s,2),u=m(f,2),o=h(u,!0);v(u),v(i),N(p=>{ve(c,p),ue(f,`background-color: ${M[l()]??""}`),G(o,V[l()])},[()=>U(e(I))[l()]]),x(t,i)}),v(ee);var te=m(ee,2),se=h(te);$(se,20,()=>[0,1,2,3,4,5,6],j,(t,r)=>{var n=De();$(n,20,()=>[0,1,2,3,4,5,6],j,(l,i)=>{var s=qe(),c=h(s);de(c),c.__change=()=>P(r,i),v(s),N(f=>ve(c,f),[()=>U(e(b))[r][i]]),x(l,s)}),v(n),x(t,n)}),v(se);var ye=m(se,2);ye.__click=be,v(te);var ce=m(te,2),Fe=h(ce);{var Se=t=>{var r=Ue(),n=pe(r),l=h(n);{var i=o=>{var p=Ze();x(o,p)},s=o=>{var p=Ge(),y=h(p);v(p),N(A=>G(y,`Checked ${A??""} possible combinations.`),[()=>e(g).toLocaleString()]),x(o,p)};ne(l,o=>{e(g)>=C-1?o(i):o(s,!1)})}v(n);var c=m(n,2);{var f=o=>{var p=Ee(),y=m(h(p),2);$(y,17,()=>e(T),j,(A,B,ae)=>{var k=Be(),z=h(k);z.textContent=`Solution ${ae+1}:`;var O=m(z,2),q=m(h(O));v(O);var D=m(O,2);$(D,21,()=>Q(e(B)),j,(d,F)=>{var E=Ce(),re=pe(E);$(re,17,()=>e(F),j,(ke,K)=>{var oe=He();N(()=>{ue(oe,`background-color: ${(e(K)?M[e(K)]:"transparent")??""}`),Me(oe,"title",e(K)?`Piece: ${e(K)}`:"")}),x(ke,oe)}),x(d,E)}),v(D),v(k),N(d=>G(q,`: ${d??""}`),[()=>e(B).map(({piece:d})=>V[d]).join(", ")]),x(A,k)}),v(p),x(o,p)},u=o=>{var p=Ke();x(o,p)};ne(c,o=>{e(T).length>0?o(f):o(u,!1)})}x(t,r)};ne(Fe,t=>{e(T)&&t(Se)})}v(ce),v(Y),N(t=>{Je(H,1,`${e(_)>=J?"text-red-500":"text-green-500"}`,"svelte-15sb5z1"),G(xe,e(_)),G(we,` initial solutions to check. If this number is over 90, there will likely be to many
			solutions to check and it will stop after checking ${t??""} scenarios`)},[()=>C.toLocaleString()]),x(a,Y),Le()}je(["change","click"]);export{st as component};
