import{Y as F,Z as ne,_ as ae,$ as fe,b as te,a0 as K,s as H,h as x,a1 as ie,e as se,G,a2 as ue,r as le,f as _e,g as U,i as R,c as g,a3 as de,j as P,a as Q,p as oe,a4 as O,a5 as W,t as ve,a6 as X,a7 as k,m as Z,a8 as L,q as ce,o as $,a9 as he,aa as Ee,ab as pe,ac as Ae,d as Te,ad as me,ae as Ie}from"./Ca3jHV7y.js";const we=[];function Ne(e,r=!1){return b(e,new Map,"",we)}function b(e,r,n,u,l=null){if(typeof e=="object"&&e!==null){var _=r.get(e);if(_!==void 0)return _;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(F(e)){var f=Array(e.length);r.set(e,f),l!==null&&r.set(l,f);for(var d=0;d<e.length;d+=1){var E=e[d];d in e&&(f[d]=b(E,r,n,u))}return f}if(ne(e)===ae){f={},r.set(e,f),l!==null&&r.set(l,f);for(var c in e)f[c]=b(e[c],r,n,u);return f}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return b(e.toJSON(),r,n,u,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function be(e,r){return r}function xe(e,r,n,u){for(var l=[],_=r.length,f=0;f<_;f++)Ee(r[f].e,l,!0);var d=_>0&&l.length===0&&n!==null;if(d){var E=n.parentNode;pe(E),E.append(n),u.clear(),w(e,r[0].prev,r[_-1].next)}Ae(l,()=>{for(var c=0;c<_;c++){var v=r[c];d||(u.delete(v.k),w(e,v.prev,v.next)),Te(v.e,!d)}})}function Me(e,r,n,u,l,_=null){var f=e,d={flags:r,items:new Map,first:null},E=(r&K)!==0;if(E){var c=e;f=x?H(ie(c)):c.appendChild(fe())}x&&se();var v=null,C=!1,i=ue(()=>{var o=n();return F(o)?o:o==null?[]:W(o)});te(()=>{var o=G(i),a=o.length;if(C&&a===0)return;C=a===0;let m=!1;if(x){var p=le(f)===_e;p!==(a===0)&&(f=U(),H(f),R(!1),m=!0)}if(x){for(var A=null,T,h=0;h<a;h++){if(g.nodeType===8&&g.data===de){f=g,m=!0,R(!1);break}var t=o[h],s=u(t,h);T=j(g,d,A,null,t,s,h,l,r,n),d.items.set(s,T),A=T}a>0&&H(U())}x||Ce(o,d,f,l,r,u,n),_!==null&&(a===0?v?P(v):v=Q(()=>_(f)):v!==null&&oe(v,()=>{v=null})),m&&R(!0),G(i)}),x&&(f=g)}function Ce(e,r,n,u,l,_,f){var y,Y,J,V;var d=(l&he)!==0,E=(l&(k|L))!==0,c=e.length,v=r.items,C=r.first,i=C,o,a=null,m,p=[],A=[],T,h,t,s;if(d)for(s=0;s<c;s+=1)T=e[s],h=_(T,s),t=v.get(h),t!==void 0&&((y=t.a)==null||y.measure(),(m??(m=new Set)).add(t));for(s=0;s<c;s+=1){if(T=e[s],h=_(T,s),t=v.get(h),t===void 0){var ee=i?i.e.nodes_start:n;a=j(ee,r,a,a===null?r.first:a.next,T,h,s,u,l,f),v.set(h,a),p=[],A=[],i=a.next;continue}if(E&&Se(t,T,s,l),(t.e.f&O)!==0&&(P(t.e),d&&((Y=t.a)==null||Y.unfix(),(m??(m=new Set)).delete(t))),t!==i){if(o!==void 0&&o.has(t)){if(p.length<A.length){var N=A[0],I;a=N.prev;var q=p[0],M=p[p.length-1];for(I=0;I<p.length;I+=1)z(p[I],N,n);for(I=0;I<A.length;I+=1)o.delete(A[I]);w(r,q.prev,M.next),w(r,a,q),w(r,M,N),i=N,a=M,s-=1,p=[],A=[]}else o.delete(t),z(t,i,n),w(r,t.prev,t.next),w(r,t,a===null?r.first:a.next),w(r,a,t),a=t;continue}for(p=[],A=[];i!==null&&i.k!==h;)(i.e.f&O)===0&&(o??(o=new Set)).add(i),A.push(i),i=i.next;if(i===null)continue;t=i}p.push(t),a=t,i=t.next}if(i!==null||o!==void 0){for(var S=o===void 0?[]:W(o);i!==null;)(i.e.f&O)===0&&S.push(i),i=i.next;var D=S.length;if(D>0){var re=(l&K)!==0&&c===0?n:null;if(d){for(s=0;s<D;s+=1)(J=S[s].a)==null||J.measure();for(s=0;s<D;s+=1)(V=S[s].a)==null||V.fix()}xe(r,S,re,v)}}d&&ve(()=>{var B;if(m!==void 0)for(t of m)(B=t.a)==null||B.apply()}),X.first=r.first&&r.first.e,X.last=a&&a.e}function Se(e,r,n,u){(u&k)!==0&&Z(e.v,r),(u&L)!==0?Z(e.i,n):e.i=n}function j(e,r,n,u,l,_,f,d,E,c){var v=(E&k)!==0,C=(E&me)===0,i=v?C?ce(l,!1,!1):$(l):l,o=(E&L)===0?f:$(f),a={i:o,v:i,k:_,a:null,e:null,prev:n,next:u};try{return a.e=Q(()=>d(e,i,o,c),x),a.e.prev=n&&n.e,a.e.next=u&&u.e,n===null?r.first=a:(n.next=a,n.e.next=a.e),u!==null&&(u.prev=a,u.e.prev=a.e),a}finally{}}function z(e,r,n){for(var u=e.next?e.next.e.nodes_start:n,l=r?r.e.nodes_start:n,_=e.e.nodes_start;_!==u;){var f=Ie(_);l.before(_),_=f}}function w(e,r,n){r===null?e.first=n:(r.next=n,r.e.next=n&&n.e),n!==null&&(n.prev=r,n.e.prev=r&&r.e)}export{Me as e,be as i,Ne as s};
