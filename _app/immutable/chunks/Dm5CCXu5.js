import{i as K,ad as ne,ae,af as fe,m as te,ag as P,D as b,n as N,z as ie,o as se,W as z,ah as ue,A as le,B as _e,C as F,F as H,y as w,ai as oe,aj as ve,G as Q,v as Z,I as de,ak as R,al as $,O as ce,am as G,an as k,L as U,ao as L,N as he,M as W,ap as Ee,aq as pe,ar as Ae,as as Te,x as me,at as Ce,au as Ie}from"./BMSpobdn.js";const Ne=[];function ge(e,r=!1){return g(e,new Map,"",Ne)}function g(e,r,n,u,l=null){if(typeof e=="object"&&e!==null){var _=r.get(e);if(_!==void 0)return _;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(K(e)){var f=Array(e.length);r.set(e,f),l!==null&&r.set(l,f);for(var o=0;o<e.length;o+=1){var E=e[o];o in e&&(f[o]=g(E,r,n,u))}return f}if(ne(e)===ae){f={},r.set(e,f),l!==null&&r.set(l,f);for(var c in e)f[c]=g(e[c],r,n,u);return f}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return g(e.toJSON(),r,n,u,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function De(e,r){return r}function xe(e,r,n,u){for(var l=[],_=r.length,f=0;f<_;f++)pe(r[f].e,l,!0);var o=_>0&&l.length===0&&n!==null;if(o){var E=n.parentNode;Ae(E),E.append(n),u.clear(),I(e,r[0].prev,r[_-1].next)}Te(l,()=>{for(var c=0;c<_;c++){var d=r[c];o||(u.delete(d.k),I(e,d.prev,d.next)),me(d.e,!o)}})}function Oe(e,r,n,u,l,_=null){var f=e,o={flags:r,items:new Map,first:null},E=(r&P)!==0;if(E){var c=e;f=N?b(ie(c)):c.appendChild(fe())}N&&se();var d=null,x=!1,i=ue(()=>{var v=n();return K(v)?v:v==null?[]:$(v)});te(()=>{var v=z(i),a=v.length;if(x&&a===0)return;x=a===0;let m=!1;if(N){var p=le(f)===_e;p!==(a===0)&&(f=F(),b(f),H(!1),m=!0)}if(N){for(var A=null,T,h=0;h<a;h++){if(w.nodeType===oe&&w.data===ve){f=w,m=!0,H(!1);break}var t=v[h],s=u(t,h);T=j(w,o,A,null,t,s,h,l,r,n),o.items.set(s,T),A=T}a>0&&b(F())}N||Me(v,o,f,l,r,u,n),_!==null&&(a===0?d?Q(d):d=Z(()=>_(f)):d!==null&&de(d,()=>{d=null})),m&&H(!0),z(i)}),N&&(f=w)}function Me(e,r,n,u,l,_,f){var q,B,J,V;var o=(l&Ee)!==0,E=(l&(k|L))!==0,c=e.length,d=r.items,x=r.first,i=x,v,a=null,m,p=[],A=[],T,h,t,s;if(o)for(s=0;s<c;s+=1)T=e[s],h=_(T,s),t=d.get(h),t!==void 0&&((q=t.a)==null||q.measure(),(m??(m=new Set)).add(t));for(s=0;s<c;s+=1){if(T=e[s],h=_(T,s),t=d.get(h),t===void 0){var ee=i?i.e.nodes_start:n;a=j(ee,r,a,a===null?r.first:a.next,T,h,s,u,l,f),d.set(h,a),p=[],A=[],i=a.next;continue}if(E&&we(t,T,s,l),(t.e.f&R)!==0&&(Q(t.e),o&&((B=t.a)==null||B.unfix(),(m??(m=new Set)).delete(t))),t!==i){if(v!==void 0&&v.has(t)){if(p.length<A.length){var S=A[0],C;a=S.prev;var y=p[0],D=p[p.length-1];for(C=0;C<p.length;C+=1)X(p[C],S,n);for(C=0;C<A.length;C+=1)v.delete(A[C]);I(r,y.prev,D.next),I(r,a,y),I(r,D,S),i=S,a=D,s-=1,p=[],A=[]}else v.delete(t),X(t,i,n),I(r,t.prev,t.next),I(r,t,a===null?r.first:a.next),I(r,a,t),a=t;continue}for(p=[],A=[];i!==null&&i.k!==h;)(i.e.f&R)===0&&(v??(v=new Set)).add(i),A.push(i),i=i.next;if(i===null)continue;t=i}p.push(t),a=t,i=t.next}if(i!==null||v!==void 0){for(var M=v===void 0?[]:$(v);i!==null;)(i.e.f&R)===0&&M.push(i),i=i.next;var O=M.length;if(O>0){var re=(l&P)!==0&&c===0?n:null;if(o){for(s=0;s<O;s+=1)(J=M[s].a)==null||J.measure();for(s=0;s<O;s+=1)(V=M[s].a)==null||V.fix()}xe(r,M,re,d)}}o&&ce(()=>{var Y;if(m!==void 0)for(t of m)(Y=t.a)==null||Y.apply()}),G.first=r.first&&r.first.e,G.last=a&&a.e}function we(e,r,n,u){(u&k)!==0&&U(e.v,r),(u&L)!==0?U(e.i,n):e.i=n}function j(e,r,n,u,l,_,f,o,E,c){var d=(E&k)!==0,x=(E&Ce)===0,i=d?x?he(l,!1,!1):W(l):l,v=(E&L)===0?f:W(f),a={i:v,v:i,k:_,a:null,e:null,prev:n,next:u};try{return a.e=Z(()=>o(e,i,v,c),N),a.e.prev=n&&n.e,a.e.next=u&&u.e,n===null?r.first=a:(n.next=a,n.e.next=a.e),u!==null&&(u.prev=a,u.e.prev=a.e),a}finally{}}function X(e,r,n){for(var u=e.next?e.next.e.nodes_start:n,l=r?r.e.nodes_start:n,_=e.e.nodes_start;_!==u;){var f=Ie(_);l.before(_),_=f}}function I(e,r,n){r===null?e.first=n:(r.next=n,r.e.next=n&&n.e),n!==null&&(n.prev=r,n.e.prev=r&&r.e)}export{Oe as e,De as i,ge as s};
